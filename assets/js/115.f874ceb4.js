(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{585:function(t,i,s){"use strict";s.r(i);var a=s(62),e=Object(a.a)({},(function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"撤销"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#撤销"}},[t._v("#")]),t._v(" 撤销")]),t._v(" "),s("p",[t._v("Git 中的撤销功能很强大，能应对多种常见、不常见场景，因此代价就是对初学者而言学习门槛很高，并且有很多特殊用法用不上，因此，通常各个图形化工具会做出简化，仅仅暴露常见、常用的撤销功能。")]),t._v(" "),s("p",[t._v("在 GitKraken 中执行撤销常见 2 处：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在工作区上方有一个 “垃圾桶” 的图标。")])]),t._v(" "),s("li",[s("p",[t._v("在工作区和暂存区的文件身上点击鼠标右键，有一个 “Discard changes” 选项。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/git/img/git-reset-GitKraken-1.png",alt:"git-reset-GitKraken-1"}})])])]),t._v(" "),s("h2",{attrs:{id:"_1-撤销所有未提交变动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-撤销所有未提交变动"}},[t._v("#")]),t._v(" 1. 撤销所有未提交变动")]),t._v(" "),s("p",[t._v("当你点击 “垃圾桶” 的图标时，你的工作区和暂存区的内容"),s("small",[t._v("（即，所有未提交的内容）")]),t._v("，会全部撤销。")]),t._v(" "),s("p",[t._v("这意味着，你的工作区的内容将会回到当初你什么都没动过的时候的样子，即，上一轮提交之后的样子。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/git/img/git-reset-GitKraken-3.gif",alt:"git-reset-GitKraken-3"}})]),t._v(" "),s("p",[t._v("当然，GitKraken 会想你确认一下，怕你是手抖点错了。")]),t._v(" "),s("p",[t._v("这个图形化界面操作的背后，执行的是 "),s("strong",[t._v("git reset --hard")]),t._v(" 命令。")]),t._v(" "),s("p",[s("strong",[t._v("hard")]),t._v(" 方式的 "),s("strong",[t._v("git reset")]),t._v(" 会同时撤销你工作区和暂存区中的内容"),s("small",[t._v("（discard all changes）")]),t._v("。撤销后，你的项目就一步到位地回到『当初什么都没动过的样子』。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("你如果是手动执行 "),s("strong",[t._v("git reset --hard")]),t._v(" 命令的话，记得它是不带参数的，它直接就撤销了所有未提交的变动。")])]),t._v(" "),s("h2",{attrs:{id:"_2-单独撤销某个文件的未提交变动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-单独撤销某个文件的未提交变动"}},[t._v("#")]),t._v(" 2. 单独撤销某个文件的未提交变动")]),t._v(" "),s("p",[t._v("这个功能执行很简单，如果你想撤销你对某个文件的变动，那么在它身上鼠标右键，点击 “Discard changes” 。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/git/img/git-reset-GitKraken-4.gif",alt:"git-reset-GitKraken-4"}})]),t._v(" "),s("p",[t._v("点完之后，这个文件就恢复成没动过之前的样子。")]),t._v(" "),s("p",[t._v("这个操作背后执行的命令是： "),s("strong",[t._v("git checkout -- <文件名>")]),t._v(" 。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("不是 git reset 什么的。这个命令从版本库中的最新、最近版本来覆盖工作目录中的内容，即恢复成你变动之前的样子。")])]),t._v(" "),s("h2",{attrs:{id:"_3-撤销刚才的提交"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-撤销刚才的提交"}},[t._v("#")]),t._v(" 3. 撤销刚才的提交")]),t._v(" "),s("p",[t._v("不排除这种情况，你已经提交、或手抖提交了，然后发现，本不该提交的 ......")]),t._v(" "),s("p",[t._v("执行 "),s("strong",[t._v("git reset --soft HEAD~1")]),t._v(" 命令就可以用来实现撤销已提交的变更。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[s("strong",[t._v("git reset --soft HEAD~1")]),t._v(" 命令的本意是：移动 HEAD 到指定的上一次的提交上。而 HEAD 指针是你的分支的逻辑上的"),s("small",[t._v("（当前的）")]),t._v("终点。")]),t._v(" "),s("p",[t._v("这里有 2 点注意的：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("HEAD~1 的含义就是最新版本的上一个版本，毫无疑问，还可以有 HEAD~2 、HEAD~3 等等，表示最新版本的上上个版本、上上上个版本。")])]),t._v(" "),s("li",[s("p",[t._v("你所提交的东西"),s("small",[t._v("（也就是你想撤销的代码）")]),t._v("，会被 Git 放到暂存区，给你多一次考虑的机会，是真得删除掉，还是改改再提交。")])])])]),t._v(" "),s("p",[t._v("在 GitKraken 图形化界面中，有这样的一个撤销操作：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/git/img/git-reset-GitKraken-5.gif",alt:"git-reset-GitKraken-5"}})]),t._v(" "),s("p",[t._v("另一种效果图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/git/img/git-top-10-07.gif",alt:"git-top-10-07"}})])])}),[],!1,null,null,null);i.default=e.exports}}]);