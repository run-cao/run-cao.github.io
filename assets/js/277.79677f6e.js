(window.webpackJsonp=window.webpackJsonp||[]).push([[277],{749:function(s,e,l){"use strict";l.r(e);var t=l(62),i=Object(t.a)({},(function(){var s=this,e=s.$createElement,l=s._self._c||e;return l("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[l("h1",{attrs:{id:"sqlsession-线程安全问题"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#sqlsession-线程安全问题"}},[s._v("#")]),s._v(" SqlSession 线程安全问题")]),s._v(" "),l("p",[s._v("当你翻看 "),l("strong",[s._v("SqlSession")]),s._v(" 的源码时，你会发现它只是一个接口。我们通过 MyBatis 操作数据库，实际上就是通过 SqlSession 获取一个 JDBC 链接，然后操作数据库。")]),s._v(" "),l("p",[s._v("SqlSession 接口有 3 个实现类：")]),s._v(" "),l("ul",[l("li",[s._v("DefaultSqlSession；")]),s._v(" "),l("li",[s._v("SqlSessionManager；")]),s._v(" "),l("li",[s._v("SqlSessionTemplate"),l("small",[s._v("（在 mybatis-spring 包中）")]),s._v("。")])]),s._v(" "),l("p",[s._v("其中")]),s._v(" "),l("ul",[l("li",[s._v("DefaultSqlSession 的注释中很直接地标识："),l("code",[s._v("Note that this class is not Thread-Safe.")]),s._v(" 。")]),s._v(" "),l("li",[s._v("SqlSessionManager 最终用到的也是 SqlSession，它也是非线程安全的。")]),s._v(" "),l("li",[s._v("SqlSessionTemplate 倒是线程安全的，但是它在 mybatis-spring 包中，是用在 mybatis 和 spring 整合中的，我们暂时又用不上。")])]),s._v(" "),l("p",[s._v("因此，"),l("strong",[s._v("SqlSession 不应该是单例的")]),s._v("，于此同时，依赖于 session 的 Mapper 要么也应该是多例的，要么就要用上 ThreadLocal ！")])])}),[],!1,null,null,null);e.default=i.exports}}]);