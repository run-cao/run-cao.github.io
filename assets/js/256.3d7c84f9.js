(window.webpackJsonp=window.webpackJsonp||[]).push([[256],{727:function(t,a,s){"use strict";s.r(a);var n=s(62),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"配置持久化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置持久化"}},[t._v("#")]),t._v(" 配置持久化")]),t._v(" "),s("p",[t._v("默认情况下，你的微服务的熔断相关配置"),s("small",[t._v("（通过 sentinel-dashboard 配置）")]),t._v("是记录在内存中的，因此当你的微服务重启时，以前的配置就会失效，需要你重新配置。")]),t._v(" "),s("p",[t._v("Sentinel 支持你将配置文件存在 “别处” ，当你的微服务启动时，从 “别处” 读取配置信息，从而避免重新配置。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("本质上，你的微服务"),s("small",[t._v("（中的 Sentinel）")]),t._v("还是从内存中读取配置上，只不过现在多了一个环节：从 “别处” 加载配置信息到内存中。")])]),t._v(" "),s("h2",{attrs:{id:"从文件中读取配置信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从文件中读取配置信息"}},[t._v("#")]),t._v(" 从文件中读取配置信息")]),t._v(" "),s("p",[t._v("在项目的 resources 目录下添加 rules/flow-rule.json 文件，其中内容如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resource"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"limitApp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"grade"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"count"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"strategy"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"controlBehavior"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clusterMode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("上面的 flow-rule.json 文件中的配置项的作用和 sentinel-dashboard 的等价关系如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/spring-cloud-alibaba/img/sentinel-nacos-config-02.png",alt:""}})]),t._v(" "),s("p",[t._v("在项目的 resources 目录下添加 rules/degrade-rule.json 文件，其中内容如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resource"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET:http://xxx-service/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"limitApp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"grade"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"count"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeWindow"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minRequestAmount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"statIntervalMs"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("ul",[s("li",[t._v("resource\t资源名，即规则的作用对象；")]),t._v(" "),s("li",[t._v("grade\t熔断策略，值为 "),s("code",[t._v("0 | 1 | 2")]),t._v("，依次对应 sentinel-dashboard 上从左到右的 "),s("code",[t._v("慢调用比例 | 异常比例 | 异常数")]),t._v(" ；")]),t._v(" "),s("li",[t._v("count\t在 “慢调用比例” 模式下为慢调用临界 RT，即超出该值则被认定为是慢调用，单位毫秒；在 “异常比例” 模式下为异常比例，值应该为 [0,1] 之间的小数；在 “异常数” 模式下为异常的数量；")]),t._v(" "),s("li",[t._v("minRequestAmount\t熔断触发的最小请求数，请求数小于该值时即使异常比率超出阈值也不会熔断；")]),t._v(" "),s("li",[t._v("timeWindow\t熔断时长，单位为 s ；")]),t._v(" "),s("li",[t._v("statIntervalMs\t统计时长，单位为 ms 。即，统计窗口时长；")]),t._v(" "),s("li",[t._v("slowRatioThreshold\t仅 “慢调用比例” 模式有效，表示慢调用比例，超过此阈值则熔断。")])]),t._v(" "),s("h2",{attrs:{id:"从-nacos-config-中读取配置信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从-nacos-config-中读取配置信息"}},[t._v("#")]),t._v(" 从 nacos config 中读取配置信息")]),t._v(" "),s("h2",{attrs:{id:"_4-nacos-上配置-sentinel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-nacos-上配置-sentinel"}},[t._v("#")]),t._v(" 4. Nacos 上配置 Sentinel")]),t._v(" "),s("p",[t._v("sentinel 支持你将资源的熔断、限流配置写在 nacos 上，在你的微服务启动时直接连接到 nacos 下载sentinel 相关配置，从而避免每次重启微服务都要重新配置 sentinel 。")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在 Nacos 上添加资源的相关配置：")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("下面的配置未来要和你的微服务中的某些信息是一致的，两者是相呼应的。你可以有所变动，但是你要确保你的微服务中的相关配置也要对应变动。")])]),t._v(" "),s("p",[t._v("在 “配置内容” 中，我们填入一个 JSON 字符串，内容如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resource"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"limitApp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"grade"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"count"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"strategy"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"controlBehavior"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clusterMode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("效果如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/spring-cloud-alibaba/img/sentinel-nacos-config-01.png",alt:"sentinel-nacos-config-01"}})]),t._v(" "),s("p",[t._v("其各个属性的含义对应在 sentinel-dashboard 上等价于什么配置，见下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/spring-cloud-alibaba/img/sentinel-nacos-config-02.png",alt:"sentinel-nacos-config-02"}})])]),t._v(" "),s("li",[s("p",[t._v("微服务项目 pom.xml 中引入相关包")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba.csp"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("sentinel-datasource-nacos"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("对于 sentinel 而言，nacos（配置中心）现在扮演的角色就是数据（来）源。")])]),t._v(" "),s("li",[s("p",[t._v("微服务项目 application.properties 中新增配置项")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.sentinel.transport.dashboard")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("localhost:8858")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sentinel dashboard")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.cloud.sentinel.transport.dashboard")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("localhost:8858")]),t._v("\n")])])])])]),t._v(" "),s("p",[t._v("spring.cloud.sentinel.datasource.flow.nacos.server-addr="),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mrow",[s("mi",[t._v("s")]),s("mi",[t._v("p")]),s("mi",[t._v("r")]),s("mi",[t._v("i")]),s("mi",[t._v("n")]),s("mi",[t._v("g")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("c")]),s("mi",[t._v("l")]),s("mi",[t._v("o")]),s("mi",[t._v("u")]),s("mi",[t._v("d")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("n")]),s("mi",[t._v("a")]),s("mi",[t._v("c")]),s("mi",[t._v("o")]),s("mi",[t._v("s")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("s")]),s("mi",[t._v("e")]),s("mi",[t._v("r")]),s("mi",[t._v("v")]),s("mi",[t._v("e")]),s("mi",[t._v("r")]),s("mo",[t._v("−")]),s("mi",[t._v("a")]),s("mi",[t._v("d")]),s("mi",[t._v("d")]),s("mi",[t._v("r")])],1),s("mi",[t._v("s")]),s("mi",[t._v("p")]),s("mi",[t._v("r")]),s("mi",[t._v("i")]),s("mi",[t._v("n")]),s("mi",[t._v("g")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("c")]),s("mi",[t._v("l")]),s("mi",[t._v("o")]),s("mi",[t._v("u")]),s("mi",[t._v("d")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("s")]),s("mi",[t._v("e")]),s("mi",[t._v("n")]),s("mi",[t._v("t")]),s("mi",[t._v("i")]),s("mi",[t._v("n")]),s("mi",[t._v("e")]),s("mi",[t._v("l")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("d")]),s("mi",[t._v("a")]),s("mi",[t._v("t")]),s("mi",[t._v("a")]),s("mi",[t._v("s")]),s("mi",[t._v("o")]),s("mi",[t._v("u")]),s("mi",[t._v("r")]),s("mi",[t._v("c")]),s("mi",[t._v("e")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("f")]),s("mi",[t._v("l")]),s("mi",[t._v("o")]),s("mi",[t._v("w")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("n")]),s("mi",[t._v("a")]),s("mi",[t._v("c")]),s("mi",[t._v("o")]),s("mi",[t._v("s")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("n")]),s("mi",[t._v("a")]),s("mi",[t._v("m")]),s("mi",[t._v("e")]),s("mi",[t._v("s")]),s("mi",[t._v("p")]),s("mi",[t._v("a")]),s("mi",[t._v("c")]),s("mi",[t._v("e")]),s("mo",[t._v("=")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("{spring.cloud.nacos.server-addr}\nspring.cloud.sentinel.datasource.flow.nacos.namespace=")])],1)],1)],1),s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.69444em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),s("span",{staticClass:"base textstyle uncramped"},[s("span",{staticClass:"mord textstyle uncramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("p")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit"},[t._v("i")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("u")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("v")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mbin"},[t._v("−")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")])]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("p")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit"},[t._v("i")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("u")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("t")]),s("span",{staticClass:"mord mathit"},[t._v("i")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("t")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("u")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02691em"}},[t._v("w")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("m")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("p")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mrel"},[t._v("=")])])])]),t._v("{sentinel.nacos.namespace}\nspring.cloud.sentinel.datasource.flow.nacos.group-id=1127\nspring.cloud.sentinel.datasource.flow.nacos.data-id=${spring.application.name}.flow\nspring.cloud.sentinel.datasource.flow.nacos.data-type=json\nspring.cloud.sentinel.datasource.flow.nacos.rule-type=flow\nspring.cloud.sentinel.datasource.flow.nacos.username=nacos\nspring.cloud.sentinel.datasource.flow.nacos.password=nacos")]),t._v(" "),s("p",[t._v("spring.cloud.sentinel.datasource.degrade.nacos.server-addr="),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mrow",[s("mi",[t._v("s")]),s("mi",[t._v("p")]),s("mi",[t._v("r")]),s("mi",[t._v("i")]),s("mi",[t._v("n")]),s("mi",[t._v("g")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("c")]),s("mi",[t._v("l")]),s("mi",[t._v("o")]),s("mi",[t._v("u")]),s("mi",[t._v("d")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("n")]),s("mi",[t._v("a")]),s("mi",[t._v("c")]),s("mi",[t._v("o")]),s("mi",[t._v("s")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("s")]),s("mi",[t._v("e")]),s("mi",[t._v("r")]),s("mi",[t._v("v")]),s("mi",[t._v("e")]),s("mi",[t._v("r")]),s("mo",[t._v("−")]),s("mi",[t._v("a")]),s("mi",[t._v("d")]),s("mi",[t._v("d")]),s("mi",[t._v("r")])],1),s("mi",[t._v("s")]),s("mi",[t._v("p")]),s("mi",[t._v("r")]),s("mi",[t._v("i")]),s("mi",[t._v("n")]),s("mi",[t._v("g")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("c")]),s("mi",[t._v("l")]),s("mi",[t._v("o")]),s("mi",[t._v("u")]),s("mi",[t._v("d")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("s")]),s("mi",[t._v("e")]),s("mi",[t._v("n")]),s("mi",[t._v("t")]),s("mi",[t._v("i")]),s("mi",[t._v("n")]),s("mi",[t._v("e")]),s("mi",[t._v("l")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("d")]),s("mi",[t._v("a")]),s("mi",[t._v("t")]),s("mi",[t._v("a")]),s("mi",[t._v("s")]),s("mi",[t._v("o")]),s("mi",[t._v("u")]),s("mi",[t._v("r")]),s("mi",[t._v("c")]),s("mi",[t._v("e")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("d")]),s("mi",[t._v("e")]),s("mi",[t._v("g")]),s("mi",[t._v("r")]),s("mi",[t._v("a")]),s("mi",[t._v("d")]),s("mi",[t._v("e")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("n")]),s("mi",[t._v("a")]),s("mi",[t._v("c")]),s("mi",[t._v("o")]),s("mi",[t._v("s")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v(".")]),s("mi",[t._v("n")]),s("mi",[t._v("a")]),s("mi",[t._v("m")]),s("mi",[t._v("e")]),s("mi",[t._v("s")]),s("mi",[t._v("p")]),s("mi",[t._v("a")]),s("mi",[t._v("c")]),s("mi",[t._v("e")]),s("mo",[t._v("=")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("{spring.cloud.nacos.server-addr}\nspring.cloud.sentinel.datasource.degrade.nacos.namespace=")])],1)],1)],1),s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.69444em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),s("span",{staticClass:"base textstyle uncramped"},[s("span",{staticClass:"mord textstyle uncramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("p")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit"},[t._v("i")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("u")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("v")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mbin"},[t._v("−")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")])]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("p")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit"},[t._v("i")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("u")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("t")]),s("span",{staticClass:"mord mathit"},[t._v("i")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("t")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("u")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathrm"},[t._v(".")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("m")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathit"},[t._v("p")]),s("span",{staticClass:"mord mathit"},[t._v("a")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mrel"},[t._v("=")])])])]),t._v("{sentinel.nacos.namespace}\nspring.cloud.sentinel.datasource.degrade.nacos.group-id=1127\nspring.cloud.sentinel.datasource.degrade.nacos.data-id=${spring.application.name}.degrade\nspring.cloud.sentinel.datasource.degrade.nacos.data-type=json\nspring.cloud.sentinel.datasource.degrade.nacos.rule-type=degrade\nspring.cloud.sentinel.datasource.degrade.nacos.username=nacos\nspring.cloud.sentinel.datasource.degrade.nacos.password=nacos")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("```\n")])])]),s("p",[t._v("熔断降级：")]),t._v(" "),s("p",[t._v("spring.cloud.sentinel.datasource.flow.nacos.server-addr=192.172.0.24:8848\nspring.cloud.sentinel.datasource.flow.nacos.data-id=sentinel-example\nspring.cloud.sentinel.datasource.flow.nacos.group-id=1127\nspring.cloud.sentinel.datasource.flow.nacos.data-type=json\nspring.cloud.sentinel.datasource.flow.nacos.rule-type=flow\nspring.cloud.sentinel.datasource.flow.nacos.username=nacos\nspring.cloud.sentinel.datasource.flow.nacos.password=nacos")])])}),[],!1,null,null,null);a.default=r.exports}}]);